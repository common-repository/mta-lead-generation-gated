!function(e){"use strict";e(function(){if(e.MTALeadGenGated=function(t){this.element=t instanceof e?t:e(t),this.local_storage_key="mta_leadgen_uuid",this.access_period=120,this.time=(new Date).getTime(),this.email="",this.phone="",this.last_name="",this.first_name="",this.company_name="",this.phone_field=t.find(".gated-phone input"),this.email_field=t.find(".gated-email input"),this.last_name_field=t.find(".gated-name .name_last input"),this.first_name_field=t.find(".gated-name .name_first input"),this.company_name_field=t.find(".gated-company input"),this.ty_display=null!==t.data("ty-display")&&"undefined"!=typeof t.data("ty-display")?t.data("ty-display"):"replace",this.gated_id=null!==t.data("gated-id")&&"undefined"!=typeof t.data("gated-id")?t.data("gated-id"):0,this.access_id=null!==t.data("access-id")&&"undefined"!=typeof t.data("access-id")?t.data("access-id"):0,this.uuid=null!==localStorage.getItem(this.local_storage_key)&&void 0!==localStorage.getItem(this.local_storage_key)?localStorage.getItem(this.local_storage_key):this.generate_uuid()},e.MTALeadGenGated.prototype={init:function(){var t=this;e(document).bind("gform_confirmation_loaded",function(e,a){localStorage.setItem("mta_leadgen_uuid",t.get_uuid()),t.ajax_display_gated_content(1,t.gated_id,t.get_uuid(),t.access_id,t.get_access_period(),t.get_fname(),t.get_lname(),t.get_cname(),t.get_email(),t.get_phone(),t.created,t.accessed)}),t.ajax_display_gated_content(0,t.gated_id,t.get_uuid(),t.access_id),this.first_name_field.bind("keyup blur",function(){t.set_fname(this.value)}),this.last_name_field.bind("keyup blur",function(){t.set_lname(this.value)}),this.company_name_field.bind("keyup blur",function(){t.set_cname(this.value)}),this.phone_field.bind("keyup blur",function(){t.set_phone(this.value)}),this.email_field.bind("keyup blur",function(){t.set_email(this.value)})},triggerAnalyticsEvent:function(e,t,a,i){try{ga("send","event",e,t,a,i)}catch(e){console.log(e)}},get_access_period:function(){return this.access_period},get_fname:function(){return this.first_name},get_uuid:function(){return this.uuid},get_lname:function(){return this.last_name},get_cname:function(){return this.company_name},get_email:function(){return this.email},get_phone:function(){return this.phone},set_fname:function(e){this.first_name=e},set_accessed:function(e){this.accessed=(new Date).getTime()},set_lname:function(e){this.last_name=e},set_cname:function(e){this.company_name=e},set_phone:function(e){this.phone=e},set_email:function(e){this.email=e},generate_uuid:function(e,t){var a="",i="";e=null===e?64:e>=64?e:64,t=t||"#aA",t.indexOf("a")>-1&&(i+="abcdefghijklmnopqrstuvwxyz"),t.indexOf("A")>-1&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),t.indexOf("#")>-1&&(i+="0123456789"),t.indexOf("!")>-1&&(i+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var n=e;n>0;--n)a+=i[Math.floor(Math.random()*i.length)];return a},ajax_display_gated_content:function(t,a,i,n,s,c,d,l,_,o,r,u,m,g,f){var p=this;t=t||0,a=a||0,i=i||p.get_uuid(),s=s||864e3,n=n||0,c=c||"",d=d||"",l=l||"",_=_||"",o=o||"",r=r||(new Date).getTime(),u=u||(new Date).getTime(),m=m||"replace",g=g||0,f=f||"#gated_form_wrapper",setTimeout(function(){e.ajax({type:"POST",dataType:"json",url:ajax_object.ajaxurl,data:{action:"display_gated_content",uuid:i,fname:c,lname:d,cname:l,email:_,phone:o,gated_id:a,accessed:u,access_id:n,created_on:r,access_period:s,create_access:t},success:function(t){if("success"==t.type)switch(t.analytics.user_tracking&&p.triggerAnalyticsEvent("Gated Content","View - "+t.analytics.post_title,t.analytics.name+" "+t.analytics.company+"("+t.analytics.email+")",1),t.analytics.view_tracking&&p.triggerAnalyticsEvent("Gated Content","View - "+t.analytics.post_title,i,1),m){case"hide_ty":case"replace":e(f).html(t.data);break;case"show_ty":e(f).append(t.data);break;default:e(f).html(t.data)}else i&&t.analytics.post_title?(t.analytics.user_tracking&&p.triggerAnalyticsEvent("Gated Content","View (Access Expired) - "+t.analytics.post_title,t.analytics.name+" "+t.analytics.company+"("+t.analytics.email+")",0),t.analytics.view_tracking&&p.triggerAnalyticsEvent("Gated Content","View (Access Expired) - "+t.analytics.post_title,i,0)):(t.analytics.user_tracking&&p.triggerAnalyticsEvent("Gated Content","View (Gated Form) - "+t.analytics.post_title,t.analytics.name+" "+t.analytics.company+"("+t.analytics.email+")",0),t.analytics.view_tracking&&p.triggerAnalyticsEvent("Gated Content","View (Gated Form) - "+t.analytics.post_title,i,0)),console.log(t)}})},g)}},e("#gated_form_wrapper").length){var t=new e.MTALeadGenGated(e("#gated_form_wrapper"));t.init()}})}(jQuery);